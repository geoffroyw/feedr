.form-group{:class => ('has-error' if ! @errors.nil? && @errors[:name].count > 0)}
  =f.label :name, :class => 'col-sm-2 control-label'
  .col-sm-10
    = f.text_field :name, :class => 'form-control'
    - if !@errors.nil? && @errors[:name].count > 0
      - @errors[:name].each do |msg|
        %span.help-block= msg
.form-group
  =f.label :parent_id, :class => 'col-sm-2 control-label'
  .col-sm-10
    =f.select :parent_id, options_for_select(nested_tree_options(Category.where('user_id = ?', current_user).roots, @category) {|i| "#{'-' * i.level} #{i.name}" }.unshift(['No Parent', nil]))

=f.fields_for :user_feeds do |builder|
  .form-group
    =builder.label :id, 'Flux', :class => 'col-sm-2 control-label'
    .col-sm-10
      = builder.select :id, options_from_collection_for_select(@user_feeds, 'id', 'name', @category.user_feeds.map {|f| f.id.to_s}), {}, {:multiple => true, :size => 15}
.form-group
  .col-sm-offset-2.col-sm-10
    = f.submit 'Enregistrer', :class => 'btn btn-success'